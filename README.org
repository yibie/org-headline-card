
[[./README_CN.org][中文版使用说明]]

* Org Headline Card

Convert Org-mode headlines and their contents into beautiful visual cards using Emacs text-properties and character art borders.

** What's New (v0.3)

- Rendering engine: PlantUML → SVG + ImageMagick (no Java/PlantUML required)
- Faster export: ~1–3s → <1s for similar content length (typical)
- Smaller output: ~1MB → ~10–40KB for similar content length (typical)
- Interactive preview + exportable effects (highlight, glow, box outline, wavy underline)

#+CAPTION: v0.3 output 
[[./images/v0.3-output.png]]

** Features

- Convert Org headlines into visual cards
- Support Org markup syntax (bold, italic, links, etc.)
- Multiple pre-designed themes:
  - Modern Chinese style (chinese-modern)
  - Ink painting style (chinese-ink)
  - Traditional screen style (chinese-screen)
  - Light theme (light)
  - Dark theme (dark)
  - Warm theme (warm)
- Character art border themes (elegant, classic, minimal)
- Interactive preview system with live theme switching
- Fixed-width export (consistent card size)
- Support custom themes
- SVG renderer + ImageMagick export (no Java/PlantUML dependency)

** Installation

*** Prerequisites

1. Emacs 27.1+
2. Org-mode 9.4+
3. ImageMagick (for image export)

Install ImageMagick:

- macOS: =brew install imagemagick=
- Ubuntu/Debian: =sudo apt-get install imagemagick=
- Arch Linux: =sudo pacman -S imagemagick=
- Windows: Download from https://imagemagick.org/script/download.php

*** Example Configuration
#+begin_src emacs-lisp
(use-package org-headline-card
  :straight (org-headline-card :type git
                               :host github
                               :repo "yibie/org-headline-card"))

(setq org-headline-card-directory "~/card/") ;; set output path
(org-headline-card-set-theme 'chinese-ink)     ;; set default theme
(org-headline-card-set-border-theme 'elegant)  ;; set border style
#+end_src

** Basic Usage

*** Generate Card

1. Move cursor to any Org headline
2. Execute =M-x org-headline-card-at-point=
3. Generated card images will be saved in configured directory

*** Preview Card

1. Move cursor to any Org headline
2. Execute =M-x org-headline-card-preview=
3. Preview buffer opens with interactive controls:
   - =q= - Quit preview
   - =r= - Refresh preview
   - =t= - Switch color theme
   - =b= - Switch border theme
   - =e= - Edit content
   - =RET= - Export to image
   - =h= - Highlight background (effect)
   - =g= - Text glow (effect)
   - =s= - Text box outline (effect)
   - =w= - Wavy underline (effect)
   - =0= - Remove effect at point
   - =C-c C-c= - Clear all effects

#+CAPTION: Preview + effects 
[[./images/v0.3-preview.png]]

*** Apply Effects (Preview)

- Select a region (or place point on a word), then press:
  - =h= (highlight), =g= (glow), =s= (box outline), =w= (wavy underline)
- Effects are exportable: press =RET= in preview to export with effects.
- Effects are limited to a single visual line; cross-line regions will raise an error.
- Customize colors/widths with a prefix arg, e.g. =C-u h= / =C-u s=.

** Theme 

*** Built-in Themes

Six carefully designed themes are available:

- chinese-modern :: Modern Chinese style, ideal for general documentation
- chinese-ink :: Ink painting style, perfect for poetry and prose
- chinese-screen :: Traditional screen style, suitable for classical texts
- light :: Light theme, great for daily use
- dark :: Dark theme, optimal for night mode
- warm :: Warm theme, comfortable for extended reading

Switch theme:

Use `M-x org-headline-card-set-theme` to switch theme

You can also add common themes to your emacs configuration file, for example: 

#+begin_src emacs-lisp
(org-headline-card-set-theme 'chinese-ink)
#+end_src

*** Custom Themes

**** Adjust Base Parameters
#+begin_src emacs-lisp
(setq org-headline-card-base-theme
      '((padding . "40")                  ; Padding
        (roundCorner . "40")              ; Corner radius
        (titleFontSize . "32")            ; Title font size
        (contentFontSize . "26")))        ; Content font size
#+end_src

**** Create Personal Theme
#+begin_src emacs-lisp
;; Add a light purple theme
(add-to-list 'org-headline-card-themes
             '(purple-light . ((defaultFontName . "LXGW WenKai Mono")
                               (defaultFontSize . "16")
                               (backgroundColor . "#F8F5FF")
                               (rectangleBorderColor . "#E6E0F3")
                               (rectangleFontColor . "#2C2C2C")
                               (rectangleBackgroundColor . "#FDFAFF"))))
#+end_src

Available theme parameters:
- =defaultFontName= :: Font family name
- =defaultFontSize= :: Default font size
- =backgroundColor= :: Background color
- =rectangleBorderColor= :: Border color
- =rectangleFontColor= :: Text color
- =rectangleBackgroundColor= :: Card background color
- =backgroundGradient= :: Background gradient (SVG format)
- =backgroundGradientType= :: Gradient type ('linear or 'radial)
- =backgroundImage= :: Background image path
- =backgroundImageOpacity= :: Background image opacity
- =backgroundPattern= :: Built-in pattern ('dots, 'grid, 'lines, 'cross-lines, 'waves)
- =backgroundPatternColor= :: Pattern color
- =backgroundPatternOpacity= :: Pattern opacity

*** Export Settings

#+begin_src emacs-lisp
;; Maximum width for exported images (in characters, default 50)
(setq org-headline-card-export-width 50)

;; Export DPI (default 72, set to 144 for 2x retina quality)
(setq org-headline-card-export-dpi 72)

;; Export font size (default 16)
(setq org-headline-card-export-font-size 16)
#+end_src

** Dependencies

- Emacs 27.1+
- Org-mode 9.4+
- ImageMagick (convert or magick)

Tip: run =M-x org-headline-card-check-dependencies= to verify your setup.

** Migration from v0.1.x

If you're upgrading from the old PlantUML-based version:

1. ✨ PlantUML and Java are NO LONGER REQUIRED
2. Install ImageMagick (see Prerequisites above)
3. Remove old PlantUML configuration from your config file
4. Everything else works the same!

** License

GPL-3.0 or later

** Contributing

Issues and Pull Requests are welcome! 
